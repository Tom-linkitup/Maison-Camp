let today = new Date()
    let curMonth = today.getMonth()
    let curYear = today.getFullYear()

    let months = ["一月", "二月", "三月", "四月", "五月", "六月", "七月", "八月", "九月", "十月", "十一月", "十二月"]
    let title = document.getElementById("mmYY")

    showCalendar(curMonth, curYear)

    function howManyDaysInMonth(mm, yy){
        //pass 32 in the third parameter will return the subtract day of the next month
        //for example: pass (Feb, 2020, 32) will return the 4th March, because Feb only have 28 days
        return 32 - new Date(yy, mm, 32).getDate()
    }
    
    function showCalendar(month, year){
        let firstDayOfMonth = (new Date(year, month)).getDay()
        let content = document.getElementById("body")
        content.innerHTML = ""
        title.innerHTML = `${months[curMonth]}/${curYear}`

        let date = 1
        for(let i = 0; i < 6; i++){
            let weekRow = document.createElement("tr")
            for(let j = 0; j < 7; j++){
                if(i === 0 && j < firstDayOfMonth){
                    let column = document.createElement("td")
                    let columnText = document.createTextNode("")
                    column.appendChild(columnText)
                    weekRow.appendChild(column)
                }else if(date > howManyDaysInMonth(curMonth, curYear)){
                    break;
                }else {
                    let column = document.createElement("td")
                    let columnText = document.createTextNode(date)
                    column.appendChild(columnText)
                    weekRow.appendChild(column)
                    date++
                }
            }
            content.appendChild(weekRow)
        }
    }

    function prev(){
        curYear = (curMonth === 0) ? curYear - 1 : curYear
        curMonth = (curMonth === 0) ? 11 : curMonth - 1
        showCalendar(curMonth, curYear)
    }

    function next(){
        curYear = (curMonth === 11) ? curYear + 1 : curYear
        curMonth = (curMonth + 1) % 12
        showCalendar(curMonth, curYear)
    }